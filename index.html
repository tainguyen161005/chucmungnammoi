<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√°o Hoa 2026 - Kh√¥ng Bao Gi·ªù ƒê√®</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- GIAO DI·ªÜN CHUNG --- */
        :root { --neon-pink: #ff66c4; --neon-purple: #ad00ff; --neon-blue: #00ffff; --bg-color: #000000; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: var(--bg-color); overflow: hidden; font-family: 'Poppins', sans-serif; color: white; }

        .overlay-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; transition: opacity 0.8s; }
        .overlay-screen.hidden { opacity: 0; pointer-events: none; }

        #btn-start { padding: 20px 50px; font-size: 28px; font-weight: bold; background: linear-gradient(45deg, #ff0043, #ff69b4); border: none; color: white; border-radius: 50px; cursor: pointer; box-shadow: 0 0 30px #ff0043; font-family: 'Dancing Script', cursive; animation: pulse 1s infinite; margin-top: 20px; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        #main-container { position: relative; width: 100%; height: 100%; opacity: 0; transition: opacity 1s; }
        #main-container.visible { opacity: 1; }
        
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        #floating-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; }

        /* --- PH·∫¶N T·ª¨ BAY --- */
        .floating-element { 
            position: absolute; 
            bottom: -450px; /* Xu·∫•t ph√°t th·∫•p h·∫≥n b√™n d∆∞·ªõi */
            padding: 15px 20px; 
            border-radius: 25px; 
            font-size: 17px; 
            font-weight: 600;
            color: white; 
            background: rgba(0, 0, 0, 0.85); /* N·ªÅn t·ªëi ƒë·ªÉ che ph√°o hoa */
            border: 2px solid var(--neon-pink); 
            box-shadow: 0 0 15px var(--neon-pink); 
            text-shadow: 0 0 2px black; 
            
            width: 280px; /* C·ªë ƒë·ªãnh chi·ªÅu r·ªông ƒë·ªÉ d·ªÖ t√≠nh to√°n v·ªã tr√≠ */
            text-align: right; 
            
            white-space: normal; 
            line-height: 1.5;
            animation: floatUpSmooth linear forwards; 
            opacity: 0;
            z-index: 20;
        }
        
        /* C·∫•u h√¨nh ri√™ng cho ·∫¢NH */
        .floating-element.is-image { 
            padding: 0; 
            background: transparent; 
            border: none; 
            box-shadow: none; 
            width: 200px; /* ·∫¢nh r·ªông 200px */
            text-align: center; 
        }
        
        .floating-element img { 
            width: 100%; height: auto; 
            border-radius: 15px; 
            border: 3px solid var(--neon-blue); 
            box-shadow: 0 0 25px var(--neon-blue); 
            object-fit: cover;
        }
        
        /* Animation bay: Ch·∫≠m v√† ƒë·ªÅu */
        @keyframes floatUpSmooth { 
            0% { transform: translateY(0) scale(0.9); opacity: 0; } 
            5% { opacity: 1; } /* Hi·ªán ra nhanh */
            15% { transform: translateY(-15vh) scale(1); } 
            85% { opacity: 1; }
            100% { transform: translateY(-130vh) scale(1); opacity: 0; } 
        }
        
        #countdown-text { font-family: 'Dancing Script', cursive; font-size: 120px; text-shadow: 0 0 30px var(--neon-purple); text-align: center; }
        #status-msg { margin-top: 15px; font-size: 14px; color: yellow; }
    </style>
</head>
<body>
    <div id="start-screen" class="overlay-screen">
        <h1 style="font-size: 40px; text-align: center;">CH√öC M·ª™NG NƒÇM M·ªöI 2026</h1>
        <div id="status-msg">ƒêang t·∫£i t√†i nguy√™n...</div>
        <button id="btn-start" style="display:none;">KHAI TI·ªÜC PH√ÅO HOA üéÜ</button>
    </div>

    <div id="intro-screen" class="overlay-screen hidden">
        <div id="countdown-text">3</div>
    </div>

    <div id="main-container">
        <canvas id="fireworks-canvas"></canvas>
        <div id="floating-container"></div>
    </div>

    <script>
        // --- 1. D·ªÆ LI·ªÜU C·ª¶A B·∫†N ---
        const messages = [
            "Ch√∫c b·∫°n nƒÉm m·ªõi lu√¥n vui v·∫ª v√† c∆∞·ªùi th·∫≠t nhi·ªÅu nha üòÑ‚ú®",
            "B·ªè qua h·∫øt nh·ªØng mu·ªôn phi·ªÅn ti√™u c·ª±c kh√¥ng vui ·ªü l·∫°i nƒÉm c≈© n√® üóëÔ∏èüëã",
            "Ch·ªâ c·∫ßn t√¢m h·ªìn m√¨nh l√† n·∫Øng, th√¨ ng√†y gi√¥ng b√£o c≈©ng h√≥a tr·ªùi xanh üåûüåà",
            "Nguy·ªán cho b·∫°n m·ªói ng√†y ƒë·ªÅu gi·∫£n ƒë∆°n, ng·∫©ng ƒë·∫ßu l√™n ƒë·ªÅu d·ªãu d√†ng, ·∫•m √°p ‚òïüå∏",
            "S·∫Ω kh√¥ng c√≥ c√°i n·∫Øng n√†o ch√≥i chang b·∫±ng ƒë∆∞·ª£c n·ª• c∆∞·ªùi c·ªßa b·∫°n üòÅüíñ"
        ];
        
        const images = [
            "5f0fcd1a-df75-43f3-b37b-e9b36a427b6f.jpg",
            "da62a5c5-ce57-41f4-b46c-860e4e4c8028.jpg",
            "0b03bf94-3577-429f-b5f5-4030ad496bf1.jpg",
            "ce2b4df3-92bc-435b-b708-347100cbb956.jpg",
            "2a1e3136-b5f2-4f83-b2a2-4e14ce44bc74.jpg",
            "2aca0a23-94ff-4cb8-bb98-8236b5468e60.jpg"
        ];

        // --- 2. X·ª¨ L√ù √ÇM THANH ---
        const AUDIO_FILE = "tieng_phao_hoa_no-www_tiengdong_com.mp3";
        const boomSound = new Audio();
        boomSound.src = AUDIO_FILE;
        boomSound.oncanplaythrough = () => {
            document.getElementById('status-msg').innerText = "S·∫µn s√†ng! ‚úÖ";
            document.getElementById('status-msg').style.color = "#00ff00";
            document.getElementById('btn-start').style.display = "block";
        };
        boomSound.onerror = () => {
            document.getElementById('status-msg').innerText = "Kh√¥ng t√¨m th·∫•y file nh·∫°c (V·∫´n ch·∫°y h√¨nh ·∫£nh).";
            document.getElementById('btn-start').style.display = "block";
        };
        function playMySound() { const sound = boomSound.cloneNode(); sound.volume = 1.0; sound.play().catch(e => {}); }

        const startBtn = document.getElementById('btn-start');
        const startScreen = document.getElementById('start-screen');
        const introScreen = document.getElementById('intro-screen');
        const mainContainer = document.getElementById('main-container');
        const countdownText = document.getElementById('countdown-text');

        startBtn.addEventListener('click', () => {
            const unlockAudio = new Audio(AUDIO_FILE); unlockAudio.volume = 0.01; unlockAudio.play().catch(e=>{});
            startScreen.classList.add('hidden'); introScreen.classList.remove('hidden');
            let count = 3;
            const timer = setInterval(() => {
                count--;
                if (count > 0) { countdownText.innerText = count; } 
                else if (count === 0) { countdownText.innerHTML = "HAPPY<br>NEW YEAR"; countdownText.style.fontSize = "80px"; playMySound(); } 
                else { clearInterval(timer); introScreen.classList.add('hidden'); mainContainer.classList.add('visible'); startShow(); }
            }, 1000);
        });

        // --- 3. ENGINE PH√ÅO HOA ---
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        class Particle {
            constructor(x, y, color, type) {
                this.x = x; this.y = y; this.prevX = x; this.prevY = y; this.color = color; this.type = type;
                const angle = Math.random() * Math.PI * 2;
                const speed = type === 'willow' ? Math.random() * 18 + 5 : Math.random() * 22 + 8;
                this.vx = Math.cos(angle) * speed; this.vy = Math.sin(angle) * speed;
                this.gravity = 0.2; this.friction = type === 'willow' ? 0.96 : 0.93;
                this.alpha = 1; this.decay = Math.random() * 0.015 + 0.005; this.lineWidth = Math.random() * 2 + 1;
            }
            update() {
                this.prevX = this.x; this.prevY = this.y; this.vx *= this.friction; this.vy *= this.friction; this.vy += this.gravity;
                this.x += this.vx; this.y += this.vy; this.alpha -= this.decay;
                if (this.type === 'willow' && Math.random() < 0.2) { this.alpha = Math.random(); }
            }
            draw(ctx) {
                ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath(); ctx.moveTo(this.prevX, this.prevY); ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = this.color; ctx.lineWidth = this.lineWidth; ctx.lineCap = 'round'; ctx.stroke();
                ctx.beginPath(); ctx.arc(this.x, this.y, this.lineWidth/2, 0, Math.PI*2); ctx.fillStyle = 'white'; ctx.fill(); ctx.restore();
            }
        }
        function createFirework() {
            const x = Math.random() * canvas.width * 0.8 + canvas.width * 0.1;
            const y = Math.random() * canvas.height * 0.5 + canvas.height * 0.1;
            const rand = Math.random(); let type, color, count;
            if (rand < 0.5) { type = 'willow'; color = 'hsl(' + Math.floor(Math.random() * 40 + 20) + ', 100%, 60%)'; count = 180; } 
            else if (rand < 0.8) { type = 'burst'; color = 'hsl(' + Math.floor(Math.random() * 60 + 180) + ', 100%, 70%)'; count = 120; } 
            else { type = 'burst'; color = '#ffffff'; count = 100; }
            setTimeout(() => playMySound(), 100);
            for (let i = 0; i < count; i++) { particles.push(new Particle(x, y, color, type)); }
        }
        function loop() {
            ctx.globalCompositeOperation = 'destination-out'; ctx.fillStyle = 'rgba(0, 0, 0, 0.15)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalCompositeOperation = 'lighter';
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update(); particles[i].draw(ctx); if (particles[i].alpha <= 0) particles.splice(i, 1);
            }
            requestAnimationFrame(loop);
        }

        // --- 4. H·ªÜ TH·ªêNG BAY PH√ÇN L√ÄN TU·∫¶N T·ª∞ (ROUND ROBIN) ---
        // Kh√¥ng d√πng random, d√πng th·ª© t·ª± c·ªë ƒë·ªãnh ƒë·ªÉ ƒë·∫£m b·∫£o kho·∫£ng c√°ch

        // C·∫•u h√¨nh c√°c l√†n ƒë∆∞·ªùng c·ªë ƒë·ªãnh (ƒê∆°n v·ªã: % t√≠nh t·ª´ l·ªÅ tr√°i)
        const IMG_LANES = [5, 30]; // ·∫¢NH: L√†n 1 (5%), L√†n 2 (30%)
        const TXT_LANES = [65, 85]; // CH·ªÆ: L√†n 1 (65%), L√†n 2 (85%) - nh∆∞ng v√¨ text align right n√™n s·∫Ω canh theo ki·ªÉu kh√°c

        let currentImgLane = 0; // Bi·∫øn ƒë·∫øm ƒë·ªÉ ƒë·ªïi l√†n ·∫£nh
        let currentTxtLane = 0; // Bi·∫øn ƒë·∫øm ƒë·ªÉ ƒë·ªïi l√†n ch·ªØ

        function spawnImage() {
            if (images.length === 0) return;
            
            const el = document.createElement('div');
            el.className = 'floating-element is-image';
            
            const img = document.createElement('img');
            img.src = images[Math.floor(Math.random() * images.length)];
            img.onerror = function() { el.remove(); };
            el.appendChild(img);

            // L·∫•y v·ªã tr√≠ l√†n hi·ªán t·∫°i
            const leftPos = IMG_LANES[currentImgLane];
            el.style.left = leftPos + '%';

            // ƒê·ªïi sang l√†n kia cho l·∫ßn sau
            currentImgLane = (currentImgLane + 1) % IMG_LANES.length;

            el.style.animationDuration = '18s'; // T·ªëc ƒë·ªô c·ªë ƒë·ªãnh ƒë·ªÉ d·ªÖ ki·ªÉm so√°t
            document.getElementById('floating-container').appendChild(el);
            setTimeout(() => el.remove(), 18000);
        }

        function spawnText() {
            const el = document.createElement('div');
            el.className = 'floating-element';
            
            el.innerText = messages[Math.floor(Math.random() * messages.length)];
            el.style.color = Math.random() > 0.5 ? "#ff66c4" : "#00ffff";
            el.style.borderColor = el.style.color;

            // L·∫•y v·ªã tr√≠ l√†n hi·ªán t·∫°i
            // L∆∞u √Ω: Text cƒÉn l·ªÅ ph·∫£i, n√™n ta ƒë·∫∑t left xa h∆°n
            const leftPos = TXT_LANES[currentTxtLane];
            el.style.left = leftPos + '%';
            
            // N·∫øu ch·ªØ qu√° d√†i n√≥ s·∫Ω tr√†n sang tr√°i, n√™n ta c·∫ßn gi·ªõi h·∫°n right b·∫±ng CSS ho·∫∑c t√≠nh to√°n
            // ·ªû ƒë√¢y ta d√πng left % ƒë∆°n gi·∫£n, CSS ƒë√£ c√≥ max-width 280px.

            // ƒê·ªïi sang l√†n kia cho l·∫ßn sau
            currentTxtLane = (currentTxtLane + 1) % TXT_LANES.length;

            el.style.animationDuration = '18s';
            document.getElementById('floating-container').appendChild(el);
            setTimeout(() => el.remove(), 18000);
        }

        function startShow() {
            loop();
            createFirework();
            
            // B·∫ÆT ƒê·∫¶U CHU K·ª≤
            // 1. Xu·∫•t hi·ªán ngay l·∫≠p t·ª©c: ·∫¢nh l√†n 1, Ch·ªØ l√†n 1
            spawnImage(); 
            spawnText();

            // 2. Thi·∫øt l·∫≠p chu k·ª≥ b·∫Øn ph√°o hoa
            setInterval(createFirework, 800); 

            // 3. Thi·∫øt l·∫≠p chu k·ª≥ xu·∫•t hi·ªán ·∫¢nh v√† Ch·ªØ
            // QUAN TR·ªåNG: Kho·∫£ng c√°ch th·ªùi gian ph·∫£i ƒë·ªß l·ªõn.
            // N·∫øu bay m·∫•t 18s, ta ch·ªù 6s m·ªõi th·∫£ c√°i ti·∫øp theo ·ªü l√†n KH√ÅC.
            // Nh∆∞ v·∫≠y:
            // 0s: ·∫¢nh A (L√†n 1)
            // 6s: ·∫¢nh B (L√†n 2)
            // 12s: ·∫¢nh C (L√†n 1) -> L√∫c n√†y ·∫¢nh A ƒë√£ bay ƒë∆∞·ª£c 12/18 qu√£ng ƒë∆∞·ªùng -> R·∫•t an to√†n, kh√¥ng ƒë√®.
            
            setInterval(() => {
                spawnImage();
                // Cho ch·ªØ xu·∫•t hi·ªán l·ªách 1 ch√∫t so v·ªõi ·∫£nh cho t·ª± nhi√™n (sau 1s)
                setTimeout(spawnText, 1000); 
            }, 6000); 
        }
    </script>
</body>
</html>
