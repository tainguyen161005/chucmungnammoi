<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- CSS GIAO DI·ªÜN --- */
        :root { --neon-pink: #ff66c4; --neon-purple: #ad00ff; --neon-blue: #00ffff; --bg-color: #050505; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: var(--bg-color); overflow: hidden; font-family: 'Poppins', sans-serif; color: white; }

        /* M√†n h√¨nh ch·ªù */
        .overlay-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; transition: opacity 0.5s; }
        .overlay-screen.hidden { opacity: 0; pointer-events: none; }

        /* N√∫t Start */
        #btn-start { padding: 20px 50px; font-size: 28px; font-weight: bold; background: linear-gradient(45deg, #ff0043, #ff69b4); border: none; color: white; border-radius: 50px; cursor: pointer; box-shadow: 0 0 30px #ff0043; font-family: 'Dancing Script', cursive; animation: pulse 1s infinite; margin-top: 20px; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* M√†n h√¨nh ch√≠nh */
        #main-container { position: relative; width: 100%; height: 100%; opacity: 0; transition: opacity 1s; }
        #main-container.visible { opacity: 1; }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        #floating-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; }

        /* Ph·∫ßn t·ª≠ bay */
        .floating-element { position: absolute; bottom: -150px; padding: 10px 25px; border-radius: 30px; font-size: 22px; font-weight: bold; color: white; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--neon-pink); box-shadow: 0 0 15px var(--neon-pink); text-shadow: 0 0 5px white; white-space: nowrap; animation: floatUp linear forwards; }
        .floating-element.is-image { padding: 0; background: transparent; border: none; box-shadow: none; }
        .floating-element img { width: 140px; border-radius: 15px; border: 2px solid var(--neon-blue); box-shadow: 0 0 20px var(--neon-blue); }
        @keyframes floatUp { 0% { transform: translateY(0) scale(0.8); opacity: 0; } 10% { opacity: 1; } 100% { transform: translateY(-120vh) scale(1); opacity: 0; } }
        
        #countdown-text { font-family: 'Dancing Script', cursive; font-size: 120px; text-shadow: 0 0 30px var(--neon-purple); }
        
        #audio-status { margin-top: 10px; font-size: 12px; color: #00ff00; }
    </style>
</head>
<body>

    <div id="start-screen" class="overlay-screen">
        <h1 style="font-size: 40px; text-align: center;">CH√öC M·ª™NG NƒÇM M·ªöI 2026</h1>
        <p style="color: #aaa; margin-top: 10px;">D√πng file nh·∫°c: tieng_phao_hoa_no-www_tiengdong_com.mp3</p>
        <div id="audio-status"></div>
        <button id="btn-start">B·∫§M ƒê·ªÇ B·∫ÆT ƒê·∫¶U üéÜ</button>
    </div>

    <div id="intro-screen" class="overlay-screen hidden">
        <div id="countdown-text">3</div>
    </div>

    <div id="main-container">
        <canvas id="fireworks-canvas"></canvas>
        <div id="floating-container"></div>
    </div>

    <script>
        // --- C·∫§U H√åNH D·ªÆ LI·ªÜU ---
        const messages = ["Ch√∫c m·ª´ng nƒÉm m·ªõi 2026! üéÜ", "V·∫°n s·ª± nh∆∞ √Ω ‚ú®", "Ti·ªÅn v√†o nh∆∞ n∆∞·ªõc üí∞", "S·ª©c kh·ªèe d·ªìi d√†o üí™", "Gia ƒë√¨nh h·∫°nh ph√∫c ‚ù§Ô∏è", "C√¥ng danh thƒÉng ti·∫øn üöÄ", "An khang th·ªãnh v∆∞·ª£ng üßß"];
        const images = ["https://cdn-icons-png.flaticon.com/512/3210/3210141.png", "https://cdn-icons-png.flaticon.com/512/3063/3063065.png"];

        // --- H·ªÜ TH·ªêNG √ÇM THANH M·ªöI (CH·ªà D√ôNG FILE C·ª¶A B·∫†N) ---
        const MyAudio = {
            file: 'tieng_phao_hoa_no-www_tiengdong_com.mp3', // T√™n file ch√≠nh x√°c
            buffer: null,
            ctx: null,

            // T·∫£i file √¢m thanh v√†o b·ªô nh·ªõ tr∆∞·ªõc ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ
            load: function() {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                this.ctx = new AudioContext();
                
                fetch(this.file)
                    .then(response => {
                        if (!response.ok) {
                            document.getElementById('audio-status').innerText = "L·ªói: Kh√¥ng t√¨m th·∫•y file nh·∫°c! H√£y ki·ªÉm tra l·∫°i t√™n file.";
                            document.getElementById('audio-status').style.color = "red";
                            throw new Error("File not found");
                        }
                        return response.arrayBuffer();
                    })
                    .then(arrayBuffer => this.ctx.decodeAudioData(arrayBuffer))
                    .then(decodedAudio => {
                        this.buffer = decodedAudio;
                        document.getElementById('audio-status').innerText = "ƒê√£ t·∫£i xong file nh·∫°c ‚úÖ";
                    })
                    .catch(e => console.error(e));
            },

            // Ph√°t √¢m thanh t·ª´ b·ªô nh·ªõ
            play: function() {
                if (!this.ctx || !this.buffer) return; // Ch∆∞a t·∫£i xong th√¨ kh√¥ng ph√°t
                if (this.ctx.state === 'suspended') this.ctx.resume();

                const source = this.ctx.createBufferSource();
                source.buffer = this.buffer;
                
                // TƒÉng √¢m l∆∞·ª£ng l√™n 1.5 l·∫ßn n·∫øu file g·ªëc h∆°i nh·ªè
                const gainNode = this.ctx.createGain();
                gainNode.gain.value = 1.5; 

                source.connect(gainNode);
                gainNode.connect(this.ctx.destination);
                source.start(0);
            }
        };

        // T·∫£i nh·∫°c ngay khi m·ªü trang
        MyAudio.load();

        // --- X·ª¨ L√ù S·ª∞ KI·ªÜN ---
        const startBtn = document.getElementById('btn-start');
        const startScreen = document.getElementById('start-screen');
        const introScreen = document.getElementById('intro-screen');
        const mainContainer = document.getElementById('main-container');
        const countdownText = document.getElementById('countdown-text');

        startBtn.addEventListener('click', () => {
            // M·ªìi √¢m thanh ƒë·ªÉ tr√¨nh duy·ªát c·∫•p quy·ªÅn
            if (MyAudio.ctx && MyAudio.ctx.state === 'suspended') MyAudio.ctx.resume();
            
            // Ph√°t th·ª≠ 1 ti·∫øng nh·∫π (volume c·ª±c nh·ªè) ƒë·ªÉ k√≠ch ho·∫°t loa
            if(MyAudio.buffer) {
                const source = MyAudio.ctx.createBufferSource();
                source.buffer = MyAudio.buffer;
                const gain = MyAudio.ctx.createGain();
                gain.gain.value = 0.01; // G·∫ßn nh∆∞ im l·∫∑ng
                source.connect(gain);
                gain.connect(MyAudio.ctx.destination);
                source.start(0);
            }

            startScreen.classList.add('hidden');
            introScreen.classList.remove('hidden');

            let count = 3;
            const timer = setInterval(() => {
                count--;
                if (count > 0) {
                    countdownText.innerText = count;
                } else if (count === 0) {
                    countdownText.innerHTML = "HAPPY<br>NEW YEAR";
                    countdownText.style.fontSize = "80px";
                    MyAudio.play(); // N·ªï b√πm ngay ch·ªØ ch√∫c m·ª´ng
                } else {
                    clearInterval(timer);
                    introScreen.classList.add('hidden');
                    mainContainer.classList.add('visible');
                    startShow();
                }
            }, 1000);
        });

        // --- PH√ÅO HOA (Canvas) ---
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height * 0.6;
            const colors = ['#ff0043', '#14fc56', '#1e7fff', '#e60aff', '#ffbf36', '#ffffff'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // CH·ªà G·ªåI H√ÄM PH√ÅT NH·∫†C C·ª¶A B·∫†N (Delay 200ms ƒë·ªÉ kh·ªõp h√¨nh)
            setTimeout(() => MyAudio.play(), 200);

            for (let i = 0; i < 60; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random() - 0.5) * 12,
                    vy: (Math.random() - 0.5) * 12,
                    alpha: 1, color: color,
                    decay: Math.random() * 0.015 + 0.015
                });
            }
        }

        function loop() {
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalCompositeOperation = 'lighter';

            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx; p.y += p.vy; p.vy += 0.05; p.alpha -= p.decay;
                
                ctx.beginPath(); ctx.arc(p.x, p.y, 2.5, 0, Math.PI * 2); 
                ctx.fillStyle = p.color; ctx.globalAlpha = p.alpha; ctx.fill();

                if (p.alpha <= 0) particles.splice(i, 1);
            }
            requestAnimationFrame(loop);
        }

        // --- H·ªÜ TH·ªêNG CH·ªÆ/·∫¢NH BAY ---
        function createFloating() {
            const el = document.createElement('div');
            el.className = 'floating-element';
            
            if (Math.random() < 0.3) {
                el.classList.add('is-image');
                const img = document.createElement('img');
                img.src = images[Math.floor(Math.random() * images.length)];
                el.appendChild(img);
            } else {
                el.innerText = messages[Math.floor(Math.random() * messages.length)];
                el.style.color = Math.random() > 0.5 ? "#ff66c4" : "#00ffff";
                el.style.borderColor = el.style.color;
            }

            el.style.left = Math.random() * 80 + 10 + '%';
            el.style.animationDuration = (Math.random() * 5 + 7) + 's';
            document.getElementById('floating-container').appendChild(el);
            setTimeout(() => el.remove(), 12000);
        }

        function startShow() {
            loop();
            setInterval(createFirework, 1000); // 1 gi√¢y b·∫Øn 1 qu·∫£
            setInterval(createFloating, 1500); // 1.5 gi√¢y bay 1 ch·ªØ
        }
    </script>
</body>
</html>
